[gd_resource type="Resource" load_steps=3 format=2]

[ext_resource path="res://scripts/resources/interactables/InteractBehavior.gd" type="Script" id=1]

[sub_resource type="GDScript" id=1]
script/source = "func execute(interact_conroller: InteractController, interacting_entity: Entity):
	var parent = interact_conroller.parent
	if interacting_entity.is_in_group(\"PC\"):
		var turn_manager = parent.scene.get_parent().get_node(\"TurnManager\")
		turn_manager.stop()
		yield(turn_manager, \"turn_loop_ended\")
		parent.scene.level += 1
		turn_manager.start()
	elif interacting_entity.is_in_group(\"AI\"):
		var next_level_enemies = parent.scene.level_props[parent.scene.level + 1].enemies
		var enemy_scene = load(interacting_entity.filename)
		if !(enemy_scene in next_level_enemies):
			next_level_enemies.append(enemy_scene)
		interacting_entity.queue_free()
"

[resource]
script = ExtResource( 1 )
code = SubResource( 1 )
